uniform shader colorShader;
uniform shader valueShader;
uniform shader modeShader;

uniform float steps;
uniform float scale;
uniform float conical;

float4 main(float2 p) {
	float value = modeShader.eval(valueShader.eval(p).xy).x;

	// get the color index
	float t = floor(value * steps) / steps;

	// get the main color
	return colorShader.eval(float2(t * steps + 0.5, 0.5));
}